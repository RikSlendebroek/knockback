/*
  knockback-localization.js
  (c) 2011-2014 Kevin Malakoff.
  Knockback is freely distributable under the MIT license.
  See the following for full license details:
    https://github.com/kmalakoff/knockback/blob/master/LICENSE
  Dependencies: Knockout.js, Backbone.js, and Underscore.js (or LoDash.js).
    Optional dependencies: Backbone.ModelRef.js and BackboneORM.
*/
(function(){var e={requires:[]};window.require&&e.requires.push(window.require),"undefined"!=typeof r&&null!==r&&e.requires.push(r),function(){"use strict";var r={},t={},n=function(e,r){return{}.hasOwnProperty.call(e,r)},i=function(e,r){var t,n,i=[];t=/^\.\.?(\/|$)/.test(r)?[e,r].join("/").split("/"):r.split("/");for(var o=0,a=t.length;a>o;o++)n=t[o],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},a=function(r){var t=function(t){var n=o(r),a=i(n,t);return e.require(a,r)};return t.register=e.require.register,t.shim=e.require.shim,t},s=function(e,r){var n={id:e,exports:{}};return t[e]=n,r(n.exports,a(e),n),n.exports},u=function(e,o){var a=i(e,".");if(null==o&&(o="/"),n(t,a))return t[a].exports;if(n(r,a))return s(a,r[a]);var u=i(a,"./index");if(n(t,u))return t[u].exports;if(n(r,u))return s(u,r[u]);throw new Error('Cannot find module "'+e+'" from "'+o+'"')},l=function(e,t){if("object"==typeof e)for(var i in e)n(e,i)&&(r[i]=e[i]);else r[e]=t},h=Object.prototype.toString,c=function(e){return"[object Array]"===h.call(e)},d=function(r){if("undefined"!=typeof window){c(r)||(r=[r]);for(var t=function(r){var t;try{if(e.require(r.path))return}catch(n){}try{for(var i=0,o=e.requires.length;o>i&&!(t=e.requires[i](r.path));i++);}catch(n){}if(!t&&r.symbol){var a=r.symbol.split(".");t=window;for(var s=0,u=a.length;u>s&&(t=t[a[s]]);s++);}if(!t){if(r.optional)return;throw new Error("Missing dependency: "+r.path)}e.require.register(r.path,function(e,r,n){return n.exports=t}),r.alias&&e.require.register(r.alias,function(e,r,n){return n.exports=t})},n=0,i=r.length;i>n;n++)t(r[n])}};e.require=u,e.require.register=l,e.require.shim=d}.call(this);var r=e.require;r.register("index",function(e,r,t){"undefined"!=typeof window&&null!==window&&r.shim&&r.shim([{symbol:"_",path:"lodash",alias:"underscore",optional:!0},{symbol:"_",path:"underscore"},{symbol:"ko",path:"knockout"},{symbol:"kb",path:"knockback"}]),t.exports=r("./localized-observable")}),r.register("localized-observable",function(e,r,t){var n,i,o,a;try{i=r("knockback")}catch(s){n=s,i=r("../core/kb")}a=r("underscore"),o=r("knockout"),i.locale_manager||(i.locale_manager=void 0),t.exports=i.LocalizedObservable=function(){function e(e,r,t){var n;return this.value=e,this.vm=t,r||(r={}),this.vm||(this.vm={}),this.read||i._throwMissing(this,"read"),i.locale_manager||i._throwMissing(this,"kb.locale_manager"),this.__kb||(this.__kb={}),this.__kb._onLocaleChange=a.bind(this._onLocaleChange,this),this.__kb._onChange=r.onChange,this.value&&(e=o.utils.unwrapObservable(this.value)),this.vo=o.observable(e?this.read(e,null):null),n=i.utils.wrappedObservable(this,o.dependentObservable({read:function(e){return function(){return e.value&&o.utils.unwrapObservable(e.value),e.vo(),e.read(o.utils.unwrapObservable(e.value))}}(this),write:function(e){return function(r){return e.write||i._throwUnexpected(e,"writing to read-only"),e.write(r,o.utils.unwrapObservable(e.value)),e.vo(r),e.__kb._onChange?e.__kb._onChange(r):void 0}}(this),owner:this.vm})),i.publishMethods(n,this,["destroy","observedValue","resetToCurrent"]),i.locale_manager.bind("change",this.__kb._onLocaleChange),r.hasOwnProperty("default")&&(n=i.DefaultObservable&&o.defaultObservable(n,r["default"])),n}return e.extend=i.extend,e.prototype.destroy=function(){return i.locale_manager.unbind("change",this.__kb._onLocaleChange),this.vm=null,i.utils.wrappedDestroy(this)},e.prototype.resetToCurrent=function(){var e,r;return r=i.utils.wrappedObservable(this),e=this.value?this.read(o.utils.unwrapObservable(this.value)):null,r()!==e?r(e):void 0},e.prototype.observedValue=function(e){return 0===arguments.length?this.value:(this.value=e,void this._onLocaleChange())},e.prototype._onLocaleChange=function(){var e;return e=this.read(o.utils.unwrapObservable(this.value)),this.vo(e),this.__kb._onChange?this.__kb._onChange(e):void 0},e}(),i.localizedObservable=function(e,r,t){return new i.LocalizedObservable(e,r,t)}}),"function"==typeof define&&define.amd?define(["require","knockback"],function(){return r("index")}):"object"==typeof exports?module.exports=r("index"):this["knockback-localization"]=r("index")}).call(this);